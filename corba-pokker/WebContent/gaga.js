(function(a,k,m,d){var q="",f=a.Exception,j={diamonds:"diamonds",d:"diamonds",spades:"spades",s:"spades",hearts:"hearts",h:"hearts",clubs:"clubs",c:"clubs"},o={"1":"A","2":"2","3":"3","4":"4","5":"5","6":"6","7":"7","8":"8","9":"9",T:"T","10":"T","11":"J",J:"J","12":"Q",Q:"Q","13":"K",K:"K","14":"A",A:"A"},c=["","A","2","3","4","5","6","7","8","9","T","J","Q","K","A"],p=(function(s){var r={};m(s).each(function(t,u){r[t]=u});return r})(c),b=["high_card","one_pair","two_pair","three_of_a_kind","straight","flush","full_house","four_of_a_kind","straight_flush"],l={high_card:"High Card",one_pair:"One Pair",two_pair:"Two Pair",three_of_a_kind:"Three of a Kind",straight:"Straight",flush:"Flush",full_house:"Full House",four_of_a_kind:"Four of a Kind",straight_flush:"Straight Flush"},e={hashHand:function(r,s){var t={};s=s||"value";m(r.cards).each(function(u){if(t[u[s]]){t[u[s]].push(u)}else{t[u[s]]=[u]}});return t},orderCards:function(t,s){var r=this;return m(t).sortBy(function(u){return r.getCardOrderIndex(u,s)})},getCardOrderIndex:function(r,s){if(s&&r.value==="A"){return 1}return p[r.value]},reverseCompare:function(r,t){var s=r.length;while(s--){if(r[s].value>t[s].value){return 1}else{if(r[s].value<t[s].value){return -1}}}return 0}},n={straight_flush:function(r){if(this.straight(r)){return this.flush(r)}return false},four_of_a_kind:function(r){var t=e.hashHand(r,"value"),s=false;m(t).each(function(u){if(u.length==4){s=u}});return s},full_house:function(r){var u=e.hashHand(r,"value"),t,s;m(u).each(function(v){if(v.length==3){s=v}else{if(v.length==2){t=v}}});if(t&&s){return m.flatten([t,s])}return false},flush:function(r){var t=e.hashHand(r,"suit"),s=false;m(t).each(function(u){if(u.length==5){s=u}});return s},straight:function(r){var s=function(w,u){var v=e.getCardOrderIndex(w[0],u)-1,t=w;m(w).each(function(x){if(t){var y=e.getCardOrderIndex(x,u);if((y-v)!==1){t=false}v=y}});return t};if(r.cardsAceLow[0].value==="A"){return s(r.cards)||s(r.cardsAceLow,1)}return s(r.cards)},three_of_a_kind:function(r){var t=e.hashHand(r,"value"),s=false;m(t).each(function(u){if(u.length>=3){s=u.slice(0,3)}});return s},two_pair:function(r){var u=e.hashHand(r,"value"),t,s;m(u).each(function(v){if(v.length>=2){if(!t){t=v.slice(0,2)}else{s=v.slice(0,2)}}});if(t&&s){return m.flatten([t,s])}return false},one_pair:function(r){var t=e.hashHand(r,"value"),s=false;m(t).each(function(v,u){if(v.length>=2){if(s){if(e.getCardOrderIndex(s[0].value)<e.getCardOrderIndex(u)){s=v.slice(0,2)}}else{s=v.slice(0,2)}}});return s},high_card:function(r){return r.cards[4]}},g={high_card:function(s,r){return e.reverseCompare(s.cards,r.cards)},one_pair:function(u,t){var r=u.identify().cards[0].value,s=t.identify().cards[0].value;if(r>s){return 1}else{if(r<s){return -1}}return e.reverseCompare(u.cards,t.cards)},two_pair:function(y,x){var u=y.identify().cards,z=x.identify().cards,r=function(A){return A.value},w=m.max(u,r).value,v=m.min(u,r).value,t=m.max(z,r).value,s=m.min(z,r).value;if(w>t){return 1}else{if(w<t){return -1}else{if(v>s){return 1}else{if(v<s){return -1}}}}},three_of_a_kind:function(u,t){var r=u.identify().cards[0].value,s=t.identify().cards[0].value;if(r>s){return 1}else{if(r<s){return -1}}return e.reverseCompare(u.cards,t.cards)},straight:function(s,r){return e.reverseCompare(s.cards,r.cards)},flush:function(s,r){return e.reverseCompare(s.cards,r.cards)},full_house:function(v,u){var s=e.hashHand(v,"value"),t=e.hashHand(u,"value"),r,y,x,w;m(s).each(function(z,A){if(z.length===3){y=A}else{if(z.length===2){r=A}}});m(t).each(function(z,A){if(z.length===3){w=A}else{if(z.length===2){x=A}}});if(y>w){return 1}else{if(y<w){return -1}else{if(r>x){return 1}else{if(r<x){return -1}}}}return 0},four_of_a_kind:function(u,t){var r=u.identify().cards[0].value,s=t.identify().cards[0].value;if(r>s){return 1}else{if(r<s){return -1}}return e.reverseCompare(u.cards,t.cards)},straight_flush:function(s,r){return e.reverseCompare(s.cards,r.cards)}},h={init:function(s,r){this.value=o[s+q];this.suit=j[r.toLowerCase()];return this}},i={init:function(r){if(r.length!==5){throw new f("A hand must have 5 cards to use that operation. (You have: "+r.length+")")}this.cards=e.orderCards(r);this.cardsAceLow=e.orderCards(r,1);return this},identify:function(){var t=b.length,r,s;while(!r&&t--){r=n[b[t]](this)}s={type:b[t],rank:t,cards:r,name:l[b[t]]};this.identify=function(){return s};return s}};a.gaga={createCard:function(s,r){if(!s||!r){throw new f("createCard: Value or Suit not valid. Value: `"+s+"` | Suit: `"+r+"`")}return Object.create(h).init(s,r)},createHand:function(t){var r=this,s=[];if(m.isArray(t)&&t.length){m(t).each(function(u){if(m.isArray(u)){if(u.length!=2){throw new f("createHand: Individual card array has incorrect length (!2): "+u.length)}u=r.createCard.apply(this,u);s.push(u)}});return Object.create(i).init(s)}else{throw new f("createHand: `cards` is not an array.")}},compareHands:function(u,s){var t=u.identify(),r=s.identify();if(t.rank===r.rank){return g[t.type](u,s)}else{if(t.rank>r.rank){return 1}}return -1}}})(this,this.document,this._);